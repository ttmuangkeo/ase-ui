{"ast":null,"code":"var Polygon = function () {\n  'use strict';\n\n  var polygon = {\n    preserveZoom: false,\n    draw: function draw(geoJSON) {\n      var drawToMap = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;\n      this.clearPolygon();\n      var map = window.atlasInstance;\n      var paths = this.createGeoJsonPolygon(geoJSON);\n      var strokeColor = '#484745';\n      var polygon_options = {\n        paths: paths,\n        strokeColor: strokeColor,\n        strokeOpacity: 1,\n        strokeWeight: 3,\n        fillColor: strokeColor,\n        fillOpacity: 0.05\n      };\n      this.preserveZoom = true;\n      this.polygon = new google.maps.Polygon(polygon_options);\n      var bounds = this.getPolygonMBR(this.polygon);\n      var loc = bounds.getCenter();\n      if (drawToMap) this.polygon.setMap(map);\n      map.fitBounds(bounds);\n      return this.polygon;\n    },\n    createGeoJsonPolygon: function createGeoJsonPolygon(geoJSON) {\n      var coords, paths;\n      var self = this;\n      self.polygonPointLocations = [];\n      coords = geoJSON.coordinates;\n      paths = [];\n      $.each(coords, function (i, n) {\n        return $.each(n, function (j, o) {\n          var path;\n          path = [];\n          $.each(o, function (k, p) {\n            var ll;\n            ll = new google.maps.LatLng(p[1], p[0]);\n            path.push(ll);\n            return self.polygonPointLocations.push(ll);\n          });\n          return paths.push(path);\n        });\n      });\n      return paths;\n    },\n    getPolygonMBR: function getPolygonMBR(polygon) {\n      var bounds;\n      bounds = new google.maps.LatLngBounds();\n      polygon.getPaths().forEach(function (p, i) {\n        return p.forEach(function (n, j) {\n          return bounds.extend(n);\n        });\n      });\n      return bounds;\n    },\n    clearPolygon: function clearPolygon() {\n      if (this.polygon != null) {\n        this.polygon.setMap(null);\n      }\n    }\n  };\n  return polygon;\n}();\n\nmodule.exports = Polygon;","map":{"version":3,"sources":["/Users/timmuangkeo/Desktop/fork/ase-ui/app/javascript/contrib/Polygon.js"],"names":["Polygon","polygon","preserveZoom","draw","geoJSON","drawToMap","clearPolygon","map","window","atlasInstance","paths","createGeoJsonPolygon","strokeColor","polygon_options","strokeOpacity","strokeWeight","fillColor","fillOpacity","google","maps","bounds","getPolygonMBR","loc","getCenter","setMap","fitBounds","coords","self","polygonPointLocations","coordinates","$","each","i","n","j","o","path","k","p","ll","LatLng","push","LatLngBounds","getPaths","forEach","extend","module","exports"],"mappings":"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","sourcesContent":["var Polygon = (function() {\n\n  'use strict';\n\n  var polygon = {\n    preserveZoom: false,\n    draw: function(geoJSON, drawToMap=true) {\n      this.clearPolygon();\n      var map = window.atlasInstance\n      var paths = this.createGeoJsonPolygon(geoJSON)\n      var strokeColor = '#484745';\n      var polygon_options = {\n        paths: paths,\n        strokeColor: strokeColor,\n        strokeOpacity: 1,\n        strokeWeight: 3,\n        fillColor: strokeColor,\n        fillOpacity: 0.05\n      };\n      this.preserveZoom = true;\n      this.polygon = new google.maps.Polygon(polygon_options);\n      var bounds = this.getPolygonMBR(this.polygon);\n      var loc = bounds.getCenter();\n      if (drawToMap) this.polygon.setMap(map);\n      map.fitBounds(bounds);\n      return this.polygon;\n    },\n    createGeoJsonPolygon: function(geoJSON) {\n      var coords, paths;\n      var self = this;\n      self.polygonPointLocations = [];\n      coords = geoJSON.coordinates;\n      paths = [];\n      \n      $.each(coords, function(i, n) {\n        return $.each(n, function(j, o) {\n          var path;\n          path = [];\n          $.each(o, function(k, p) {\n            var ll;\n            ll = new google.maps.LatLng(p[1], p[0]);\n            path.push(ll);\n            return self.polygonPointLocations.push(ll);\n          });\n          return paths.push(path);\n        });\n      });\n      return paths;\n    },\n    getPolygonMBR: function(polygon) {\n      var bounds;\n      bounds = new google.maps.LatLngBounds();\n      polygon.getPaths().forEach(function(p, i) {\n        return p.forEach(function(n, j) {\n          return bounds.extend(n);\n        });\n      });\n      return bounds;\n    },\n    clearPolygon: function() {\n      if (this.polygon != null) {\n        this.polygon.setMap(null);\n      }\n    }\n  };\n  \n  return polygon;\n\n})();\n\nmodule.exports = Polygon;\n"]},"metadata":{},"sourceType":"module"}